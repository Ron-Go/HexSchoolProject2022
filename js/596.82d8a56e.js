"use strict";(self["webpackChunkproject2022"]=self["webpackChunkproject2022"]||[]).push([[596],{3387:function(e,t,s){var r=s(7398),o=s.n(r);t["Z"]={data(){return{isLoading:!1,loader:"dots",fullPage:!1,color:"#D96500",backgroundColor:"#eaeaea",opacity:1}},components:{Loading:o()}}},7089:function(e,t){t["Z"]={methods:{convertDate(e){const t=new Date(1e3*e);return`${t.getFullYear()}/${this.repairZoro(t.getMonth()+1)}/${this.repairZoro(t.getDate())} ${this.repairZoro(t.getHours())}:${this.repairZoro(t.getMinutes())}:${this.repairZoro(t.getSeconds())}`},repairZoro(e){return e<10?`0${e}`:e}}}},654:function(e,t){t["Z"]={methods:{currency(e){const t=parseInt(e,10);return`${t.toFixed(0).replace(/./g,((e,t,s)=>t&&"."!==e&&(s.length-t)%3===0?`, ${e}`.replace(/\s/g,""):e))}`}}}},7596:function(e,t,s){s.r(t),s.d(t,{default:function(){return ee}});var r=s(6252),o=s(9963),a=s(3577);const i={class:"container d-flex flex-column justify-content-center align-items-center",style:{"padding-top":"56px"}},l={class:"col-10 col-md-7 mt-5"},n={class:"col-12 col-md-7 d-flex flex-column justify-content-center my-5"},d={class:"position-relative bg-light p-3"},c={key:0},p=(0,r._)("h2",{class:"text-center mb-3"},"選擇付款方式",-1),u={class:"d-flex flex-row justify-content-evenly mb-3"},m={class:"form-check"},g=(0,r._)("label",{for:"radio01",class:"form-check-label fw--medium fs-5"},"信用卡",-1),y={class:"form-check"},h=(0,r._)("label",{for:"radio02",class:"form-check-label fw--medium fs-5"},"Paypel",-1),_={class:"text-center"},f={key:1,class:"text-danger text-center py-1"},w=(0,r._)("span",{class:"text--danger fw--bold"},[(0,r.Uk)("您已完成付款"),(0,r._)("br"),(0,r.Uk)("將盡快安排商品出貨")],-1),b=[w],x={class:"table my-5"},v=(0,r._)("th",{class:"text-end fw--medium py-3"},"訂單編號：",-1),k={class:"text--danger fw--bold py-3"},Z=(0,r._)("th",{class:"text-end fw--medium py-3"},"訂單建立時間：",-1),$={key:0,class:"fw--bold py-3"},D=(0,r._)("th",{class:"text-end fw--medium py-3"},"收件人姓名：",-1),P={class:"py-3"},C=(0,r._)("th",{class:"text-end fw--medium py-3"},"收件人電話：",-1),z={class:"py-3"},j=(0,r._)("th",{class:"text-end fw--medium py-3"},"收件人地址：",-1),M={class:"py-3"},L=(0,r._)("th",{class:"text-end fw--medium py-3"},"購買商品：",-1),U={class:"d-flex flex-column justify-content-between p-3 bg--bggray mt-2"},q={class:"mb-2"},I={class:"d-flex justify-content-between"},H={class:"fs-6"},Y=(0,r.Uk)("數量： "),F={class:"text--danger fw--medium fs-6"},G={class:"fs-6"},O=(0,r.Uk)("總價： "),V={class:"text--danger fw--medium fs-6"},W=(0,r._)("th",{class:"text-end fw--medium py-3"},"付款總金額：",-1),B={class:"text--danger fw--bold py-3"},K=(0,r._)("th",{class:"text-end fw--medium py-3"},"付款狀態：",-1),S=(0,r.Uk)("回首頁");function A(e,t,s,w,A,E){const J=(0,r.up)("progress-bar"),N=(0,r.up)("Loading"),Q=(0,r.up)("router-link");return(0,r.wg)(),(0,r.iD)("div",i,[(0,r._)("div",l,[(0,r.Wm)(J,{progress:A.progress},null,8,["progress"])]),(0,r._)("div",n,[(0,r._)("div",d,[(0,r.Wm)(N,{active:e.isLoading,loader:e.loader,"is-full-page":e.fullPage,color:e.color},null,8,["active","loader","is-full-page","color"]),A.finishPayment||A.order.is_paid?((0,r.wg)(),(0,r.iD)("h5",f,b)):((0,r.wg)(),(0,r.iD)("div",c,[p,(0,r._)("div",u,[(0,r._)("div",m,[(0,r.wy)((0,r._)("input",{type:"radio","onUpdate:modelValue":t[0]||(t[0]=e=>A.paymentMode=e),class:"form-check-input me-3",id:"radio01",value:"creditCard"},null,512),[[o.G2,A.paymentMode]]),g]),(0,r._)("div",y,[(0,r.wy)((0,r._)("input",{type:"radio","onUpdate:modelValue":t[1]||(t[1]=e=>A.paymentMode=e),class:"form-check-input me-3",id:"radio02",value:"paypel"},null,512),[[o.G2,A.paymentMode]]),h])]),(0,r._)("div",_,[(0,r._)("button",{type:"button",class:(0,a.C_)(["btn btn-primary text-white",{"d-none":"creditCard"!==A.paymentMode&&"paypel"!==A.paymentMode}]),onClick:t[2]||(t[2]=(...e)=>E.goPayment&&E.goPayment(...e))},"付款去",2)])]))]),(0,r._)("table",x,[(0,r._)("tbody",null,[(0,r._)("tr",null,[v,(0,r._)("td",k,(0,a.zw)(A.order.id),1)]),(0,r._)("tr",null,[Z,A.order.create_at?((0,r.wg)(),(0,r.iD)("td",$,(0,a.zw)(e.convertDate(A.order.create_at)),1)):(0,r.kq)("",!0)]),A.order.user?((0,r.wg)(),(0,r.iD)(r.HY,{key:0},[(0,r._)("tr",null,[D,(0,r._)("td",P,(0,a.zw)(A.order.user.name),1)]),(0,r._)("tr",null,[C,(0,r._)("td",z,(0,a.zw)(A.order.user.tel),1)]),(0,r._)("tr",null,[j,(0,r._)("td",M,(0,a.zw)(A.order.user.address),1)])],64)):(0,r.kq)("",!0),(0,r._)("tr",null,[L,(0,r._)("td",null,[((0,r.wg)(!0),(0,r.iD)(r.HY,null,(0,r.Ko)(A.order.products,((t,s)=>((0,r.wg)(),(0,r.iD)("div",{key:"key"+s},[(0,r._)("div",U,[(0,r._)("h6",q,(0,a.zw)(t.product.title),1),(0,r._)("div",I,[(0,r._)("p",H,[Y,(0,r._)("span",F,(0,a.zw)(`${t.qty}`),1)]),(0,r._)("p",G,[O,(0,r._)("span",V,(0,a.zw)(`$${e.currency(t.final_total)}`),1)])])])])))),128))])]),A.finishPayment?(0,r.kq)("",!0):((0,r.wg)(),(0,r.iD)(r.HY,{key:1},[(0,r._)("tr",null,[W,(0,r._)("td",B,"$"+(0,a.zw)(e.currency(A.order.total)),1)]),(0,r._)("tr",null,[K,(0,r._)("td",{class:(0,a.C_)(["py-3 fw--bold",{"text--success":A.order.is_paid,"text--danger":!A.order.is_paid}])},(0,a.zw)(""+(A.order.is_paid?"已付款":"未付款")),3)])],64))])]),A.finishPayment?((0,r.wg)(),(0,r.j4)(Q,{key:0,class:"btn btn-primary text-white w-100 w-md-25 mx-auto",to:"/"},{default:(0,r.w5)((()=>[S])),_:1})):(0,r.kq)("",!0)])])}var E=s(3387),J=s(6330),N=s(7089),Q=s(654),R={data(){return{progress:{step:2,percent:"50%"},paymentMode:"",finishPayment:!1,order:{},orderId:""}},components:{progressBar:J.Z},mounted(){this.orderId=this.$route.params.id,this.getOrder()},methods:{goPayment(){this.isLoading=!0,this.axios.post(`https://vue3-course-api.hexschool.io/v2/api/vue2022ron/pay/${this.orderId}`).then((e=>{this.finishPayment=e.data.success,this.progress.step=3,this.progress.percent="100%",this.isLoading=!1})).catch((e=>{console.log(e)}))},getOrder(){this.isLoading=!0,this.axios.get(`https://vue3-course-api.hexschool.io/v2/api/vue2022ron/order/${this.orderId}`).then((e=>{this.order=e.data.order,this.order.is_paid&&this.goPayment(),this.isLoading=!1})).catch((e=>{console.dir(e)}))}},mixins:[N.Z,E.Z,Q.Z]},T=s(3744);const X=(0,T.Z)(R,[["render",A]]);var ee=X},6330:function(e,t,s){s.d(t,{Z:function(){return f}});var r=s(6252),o=s(3577);const a={class:"position-relative m-4"},i={class:"progress",style:{height:"1px"}},l=(0,r._)("span",{class:"material-symbols-outlined"},null,-1),n={class:"position-absolute top-0 start-0 translate-middle"},d=(0,r._)("span",{class:"position-absolute fs-5 text-center text--primary",style:{top:"-60%",width:"3rem"}},"結帳",-1),c={class:"position-absolute top-0 start-50 translate-middle"},p=(0,r._)("span",{class:"position-absolute fs-5 text-center text--primary",style:{top:"-60%",width:"3rem"}},"付款",-1),u={class:"position-absolute top-0 start-100 translate-middle"},m=(0,r._)("span",{class:"position-absolute fs-5 text-center text--secondary",style:{top:"-60%",width:"3rem"}},"完成",-1);function g(e,t,s,g,y,h){return(0,r.wg)(),(0,r.iD)("div",a,[(0,r._)("div",i,[(0,r._)("div",{class:"progress-bar",role:"progressbar",style:(0,o.j5)({width:s.progress.percent}),"aria-valuenow":"0","aria-valuemin":"0","aria-valuemax":"100"},null,4)]),l,(0,r._)("div",n,[d,(0,r._)("span",{class:(0,o.C_)(["d-block fs-3 text-center pt-2 rounded-circle material-symbols-outlined",{"bg--primary":s.progress.step>=1,"bg--bggray":s.progress.step<1,"text--light":s.progress.step>=1,"text--scondary":s.progress.step<1}]),style:{width:"3rem",height:"3rem"}},"shopping_cart ",2)]),(0,r._)("div",c,[p,(0,r._)("span",{class:(0,o.C_)(["d-block fs-3 text-center pt-2 rounded-circle material-symbols-outlined",{"bg--primary":s.progress.step>=2,"bg--bggray":s.progress.step<2,"text--light":s.progress.step>=2,"text--scondary":s.progress.step<2}]),style:{width:"3rem",height:"3rem"}},"credit_card ",2)]),(0,r._)("div",u,[m,(0,r._)("span",{class:(0,o.C_)(["d-block fs-3 text-center pt-2 rounded-circle material-symbols-outlined",{"bg--primary":s.progress.step>=3,"bg--bggray":s.progress.step<3,"text--light":s.progress.step>=3,"text--scondary":s.progress.step<3}]),style:{width:"3rem",height:"3rem"}},"task_alt ",2)])])}var y={props:["progress"],mounted(){console.log("order"===this.progress.step[0])}},h=s(3744);const _=(0,h.Z)(y,[["render",g]]);var f=_}}]);
//# sourceMappingURL=596.82d8a56e.js.map