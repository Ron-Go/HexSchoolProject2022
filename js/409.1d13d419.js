"use strict";(self["webpackChunkproject2022"]=self["webpackChunkproject2022"]||[]).push([[409],{3387:function(e,s,t){var a=t(7398),r=t.n(a);s["Z"]={data(){return{isLoading:!1,loader:"dots",fullPage:!1,color:"#D96500",backgroundColor:"#eaeaea",opacity:1}},components:{Loading:r()}}},654:function(e,s){s["Z"]={methods:{currency(e){const s=parseInt(e,10);return`${s.toFixed(0).replace(/./g,((e,s,t)=>s&&"."!==e&&(t.length-s)%3===0?`, ${e}`.replace(/\s/g,""):e))}`}}}},4409:function(e,s,t){t.r(s),t.d(s,{default:function(){return me}});var a=t(6252),r=t(3577),l=t(9963);const o={class:"container",style:{"padding-top":"56px"},id:"order"},d={class:"row d-flex justify-content-center"},n={class:"col-10 col-md-6 mt-5"},i={class:"row d-flex flex-column align-items-center mb-5"},c={class:"text-center my-5"},m={class:"col-md-6 mb-5"},p=(0,a._)("h5",{class:"mb-3"},"訂單明細",-1),u={class:"border border--secondary p-3 pb-0"},b={class:"fs-5"},f={class:"d-flex justify-content-between"},_={class:"d-block fs-5 fw--medium mb-0"},g=(0,a.Uk)("數量： "),h={class:"text--danger"},y={class:"d-block fw--medium fs-5 mb-0"},v=(0,a.Uk)("總價： "),w={class:"text--danger"},x={class:"table"},D=(0,a._)("th",{class:"fs-5 text-start fw--medium"},"小計",-1),k={class:"fs-5 fw--bold text-end"},C=(0,a._)("th",{class:"fs-5 text-start fw--medium"},"折扣",-1),$={class:"fs-5 text--success fw--bold text-end"},V=(0,a._)("th",{class:"fs-5 text-start fw--medium"},"全部總價",-1),z={class:"fs-5 text--danger fw--bold text-end"},W={key:0,class:"col-12 col-md-6"},Z=(0,a._)("h5",{class:"fw--medium mb-3"},"收件人資料",-1),U={class:"row"},j={class:"col-6 mb-3"},L=(0,a._)("label",{for:"name",class:"form-label"},"姓名",-1),S={class:"col-6 mb-3"},q=(0,a._)("label",{for:"tel",class:"form-label"},"電話",-1),I={class:"mb-3"},P=(0,a._)("label",{for:"email",class:"form-label"},"電子郵件",-1),T={class:"mb-3"},O=(0,a._)("label",{for:"address",class:"form-label"},"地址",-1),B={class:"mb-3"},E=(0,a._)("label",{for:"remark",class:"form-label"},"備註",-1),F=(0,a._)("div",{class:"mb-3 text-center"},[(0,a._)("button",{type:"submit",class:"btn btn-primary btn-lg text--light w-100 w-md-25"},"下一步")],-1),H={key:1,class:"col-12 col-md-6 position-relative"},K=(0,a._)("h5",{class:"fw--medium mb-3"},"收件人資料",-1),M={class:"table table-striped"},Y=(0,a._)("th",{class:"py-3"},"姓名：",-1),A={class:"py-3"},G=(0,a._)("th",{class:"py-3"},"電話：",-1),J={class:"py-3"},N=(0,a._)("th",{class:"py-3"},"電子郵件：",-1),Q={class:"py-3"},R=(0,a._)("th",{class:"py-3"},"地址：",-1),X={class:"py-3"},ee=(0,a._)("th",{class:"py-3"},"備註：",-1),se={class:"py-3"},te={class:"mb-3 d-flex justify-content-between"};function ae(e,s,t,ae,re,le){const oe=(0,a.up)("progress-bar"),de=(0,a.up)("v-field"),ne=(0,a.up)("error-message"),ie=(0,a.up)("v-form"),ce=(0,a.up)("Loading");return(0,a.wg)(),(0,a.iD)("div",o,[(0,a._)("div",d,[(0,a._)("div",n,[(0,a.Wm)(oe,{progress:re.progress},null,8,["progress"])])]),(0,a._)("div",i,[(0,a._)("h4",c,(0,r.zw)(re.dataConfirm?"確認訂單資料":"輸入訂單資料"),1),(0,a._)("div",m,[p,(0,a._)("div",u,[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(re.cart.products,((s,t)=>((0,a.wg)(),(0,a.iD)("div",{key:"item"+t,class:"bg--light p-3 mb-3"},[(0,a._)("div",null,[(0,a._)("p",b,(0,r.zw)(s.product.title),1)]),(0,a._)("div",f,[(0,a._)("p",_,[g,(0,a._)("span",h,(0,r.zw)(s.qty),1)]),(0,a._)("p",y,[v,(0,a._)("span",w,(0,r.zw)(`$${e.currency(s.final_total)}`),1)])])])))),128)),(0,a._)("table",x,[(0,a._)("tbody",null,[(0,a._)("tr",null,[D,(0,a._)("td",k,(0,r.zw)(`$${e.currency(re.cart.total)}`),1)]),(0,a._)("tr",null,[C,(0,a._)("td",$,(0,r.zw)(`$${e.currency(re.cart.total-re.cart.finalTotal)}`),1)]),(0,a._)("tr",null,[V,(0,a._)("td",z,(0,r.zw)(`$${re.cart.finalTotal}`),1)])])])])]),re.dataConfirm?((0,a.wg)(),(0,a.iD)("div",H,[(0,a.Wm)(ce,{active:e.isLoading,loader:e.loader,"is-full-page":e.fullPage,color:e.color},null,8,["active","loader","is-full-page","color"]),K,(0,a._)("table",M,[(0,a._)("tbody",null,[(0,a._)("tr",null,[Y,(0,a._)("td",A,(0,r.zw)(re.orderData.user.name),1)]),(0,a._)("tr",null,[G,(0,a._)("td",J,(0,r.zw)(re.orderData.user.tel),1)]),(0,a._)("tr",null,[N,(0,a._)("td",Q,(0,r.zw)(re.orderData.user.email),1)]),(0,a._)("tr",null,[R,(0,a._)("td",X,(0,r.zw)(re.orderData.user.address),1)]),(0,a._)("tr",null,[ee,(0,a._)("td",se,(0,r.zw)(re.orderData.message),1)])])]),(0,a._)("div",te,[(0,a._)("button",{type:"button",class:"btn btn-primary btn-lg text-white w-25",onClick:s[5]||(s[5]=e=>re.dataConfirm=!re.dataConfirm)},"上一步"),(0,a._)("button",{type:"button",class:"btn btn-primary btn-lg text-white w-25",onClick:s[6]||(s[6]=(...e)=>le.SendData&&le.SendData(...e))},"送出")])])):((0,a.wg)(),(0,a.iD)("div",W,[Z,(0,a.Wm)(ie,{ref:"formDom",onSubmit:le.onCheckOrder},{default:(0,a.w5)((({errors:e})=>[(0,a._)("div",U,[(0,a._)("div",j,[L,(0,a.Wm)(de,{id:"name",name:"姓名",type:"text",class:(0,r.C_)(["form-control fs-6 mt-2",{"is-invalid":e["姓名"]}]),placeholder:"請輸入姓名",rules:"required",modelValue:re.orderData.user.name,"onUpdate:modelValue":s[0]||(s[0]=e=>re.orderData.user.name=e)},null,8,["class","modelValue"]),(0,a.Wm)(ne,{name:"姓名",class:"invalid-feedback"})]),(0,a._)("div",S,[q,(0,a.Wm)(de,{id:"tel",name:"電話",type:"tel",class:(0,r.C_)(["form-control fs-6 mt-2",{"is-invalid":e["電話"]}]),placeholder:"請輸入電話",rules:le.isPhone,modelValue:re.orderData.user.tel,"onUpdate:modelValue":s[1]||(s[1]=e=>re.orderData.user.tel=e)},null,8,["class","rules","modelValue"]),(0,a.Wm)(ne,{name:"電話",class:"invalid-feedback"})])]),(0,a._)("div",I,[P,(0,a.Wm)(de,{id:"email",name:"email",type:"email",class:(0,r.C_)(["form-control fs-6 mt-2",{"is-invalid":e["email"]}]),rules:"email|required",placeholder:"請輸入 Email",modelValue:re.orderData.user.email,"onUpdate:modelValue":s[2]||(s[2]=e=>re.orderData.user.email=e),modelModifiers:{trim:!0}},null,8,["class","modelValue"]),(0,a.Wm)(ne,{name:"email",class:"invalid-feedback"})]),(0,a._)("div",T,[O,(0,a.Wm)(de,{id:"address",name:"地址",type:"text",class:(0,r.C_)(["form-control fs-6 mt-2",{"is-invalid":e["地址"]}]),placeholder:"請輸入地址",rules:"required",modelValue:re.orderData.user.address,"onUpdate:modelValue":s[3]||(s[3]=e=>re.orderData.user.address=e)},null,8,["class","modelValue"]),(0,a.Wm)(ne,{name:"地址",class:"invalid-feedback"})]),(0,a._)("div",B,[E,(0,a.wy)((0,a._)("textarea",{class:"form-control fs-6 mt-2",name:"remark",id:"remark",cols:"30",rows:"5","onUpdate:modelValue":s[4]||(s[4]=e=>re.orderData.message=e)},null,512),[[l.nr,re.orderData.message]])]),F])),_:1},8,["onSubmit"])]))])])}var re=t(9868),le=t(3387),oe=t(654),de=t(6330),ne={data(){return{progress:{step:1,percent:"0%"},cart:{},orderData:{user:{}},orderId:"",dataConfirm:!1}},components:{progressBar:de.Z},mounted(){re.Z.on("cart-to-order",(e=>{this.cart=e}))},methods:{isPhone(e){const s=/^(0)[0-9]{9}$/;return!!s.test(e)||"需要正確的電話號碼"},onCheckOrder(){this.dataConfirm=!this.dataConfirm,this.$router.push("/front/order")},SendData(){this.isLoading=!0,this.axios.post("https://vue3-course-api.hexschool.io/v2/api/vue2022ron/order",{data:this.orderData}).then((e=>{console.dir(e.data.orderId),this.isLoading=!1,this.orderData.user={},re.Z.emit("send-orderToCart"),this.$router.push(`payment/${e.data.orderId}`)})).catch((e=>{console.dir(e)}))}},unmounted(){re.Z.off("get-cartToOrder")},mixins:[oe.Z,le.Z]},ie=t(3744);const ce=(0,ie.Z)(ne,[["render",ae]]);var me=ce},6330:function(e,s,t){t.d(s,{Z:function(){return h}});var a=t(6252),r=t(3577);const l={class:"position-relative m-4"},o={class:"progress",style:{height:"1px"}},d=(0,a._)("span",{class:"material-symbols-outlined"},null,-1),n={class:"position-absolute top-0 start-0 translate-middle"},i=(0,a._)("span",{class:"position-absolute fs-5 text-center text--primary",style:{top:"-60%",width:"3rem"}},"結帳",-1),c={class:"position-absolute top-0 start-50 translate-middle"},m=(0,a._)("span",{class:"position-absolute fs-5 text-center text--primary",style:{top:"-60%",width:"3rem"}},"付款",-1),p={class:"position-absolute top-0 start-100 translate-middle"},u=(0,a._)("span",{class:"position-absolute fs-5 text-center text--secondary",style:{top:"-60%",width:"3rem"}},"完成",-1);function b(e,s,t,b,f,_){return(0,a.wg)(),(0,a.iD)("div",l,[(0,a._)("div",o,[(0,a._)("div",{class:"progress-bar",role:"progressbar",style:(0,r.j5)({width:t.progress.percent}),"aria-valuenow":"0","aria-valuemin":"0","aria-valuemax":"100"},null,4)]),d,(0,a._)("div",n,[i,(0,a._)("span",{class:(0,r.C_)(["d-block fs-3 text-center pt-2 rounded-circle material-symbols-outlined",{"bg--primary":t.progress.step>=1,"bg--bggray":t.progress.step<1,"text--light":t.progress.step>=1,"text--scondary":t.progress.step<1}]),style:{width:"3rem",height:"3rem"}},"shopping_cart ",2)]),(0,a._)("div",c,[m,(0,a._)("span",{class:(0,r.C_)(["d-block fs-3 text-center pt-2 rounded-circle material-symbols-outlined",{"bg--primary":t.progress.step>=2,"bg--bggray":t.progress.step<2,"text--light":t.progress.step>=2,"text--scondary":t.progress.step<2}]),style:{width:"3rem",height:"3rem"}},"credit_card ",2)]),(0,a._)("div",p,[u,(0,a._)("span",{class:(0,r.C_)(["d-block fs-3 text-center pt-2 rounded-circle material-symbols-outlined",{"bg--primary":t.progress.step>=3,"bg--bggray":t.progress.step<3,"text--light":t.progress.step>=3,"text--scondary":t.progress.step<3}]),style:{width:"3rem",height:"3rem"}},"task_alt ",2)])])}var f={props:["progress"],mounted(){console.log("order"===this.progress.step[0])}},_=t(3744);const g=(0,_.Z)(f,[["render",b]]);var h=g}}]);
//# sourceMappingURL=409.1d13d419.js.map