"use strict";(self["webpackChunkproject2022"]=self["webpackChunkproject2022"]||[]).push([[255],{3387:function(a,t,e){var o=e(7398),l=e.n(o);t["Z"]={data(){return{isLoading:!1,loader:"dots",fullPage:!1,color:"#D96500",backgroundColor:"#eaeaea",opacity:1}},components:{Loading:l()}}},5255:function(a,t,e){e.r(t),e.d(t,{default:function(){return Ka}});var o=e(6252),l=e(3577);const n={class:"container position-relative"},i={key:0,style:{height:"80vh"}},s={key:1,class:"row"},c={class:"col-12 d-flex justify-content-end my-3"},r={class:"col-12"},d={class:"table table-hover"},u=(0,o._)("thead",null,[(0,o._)("tr",null,[(0,o._)("th",null,"分類"),(0,o._)("th",null,"產品名稱"),(0,o._)("th",null,"星級評等"),(0,o._)("th",null,"原價"),(0,o._)("th",null,"售價"),(0,o._)("th",null,"是否啟用"),(0,o._)("th",{width:"120px"},"管理")])],-1),g={class:"text-right"},m={class:"text-right"},p={class:"btn-group"},h=["onClick"],_=["onClick"];function b(a,t,e,b,v,w){const f=(0,o.up)("Loading"),y=(0,o.up)("pagination"),M=(0,o.up)("toastMessage"),k=(0,o.up)("manageModal");return(0,o.wg)(),(0,o.iD)(o.HY,null,[(0,o._)("div",n,[(0,o.Wm)(f,{active:a.isLoading,loader:a.loader,"is-full-page":a.fullPage,color:a.color},null,8,["active","loader","is-full-page","color"]),v.tempProducts.length?((0,o.wg)(),(0,o.iD)("div",s,[(0,o._)("div",c,[(0,o._)("button",{type:"button",class:"btn btn-primary text-white",onclick:"",onClick:t[0]||(t[0]=(...a)=>w.addProduct&&w.addProduct(...a))},"建立新產品")]),(0,o._)("div",r,[(0,o._)("table",d,[u,(0,o._)("tbody",null,[((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(v.tempProducts,((a,t)=>((0,o.wg)(),(0,o.iD)("tr",{key:"key"+t},[(0,o._)("td",null,(0,l.zw)(a.category),1),(0,o._)("td",null,(0,l.zw)(a.title),1),(0,o._)("td",null,[((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(v.tempProducts[t].rating,((a,t)=>((0,o.wg)(),(0,o.iD)("span",{key:"star"+t,class:"text-warning"},"☆")))),128))]),(0,o._)("td",g,(0,l.zw)(a.origin_price),1),(0,o._)("td",m,(0,l.zw)(a.price),1),(0,o._)("td",{class:(0,l.C_)([{"text-success":1==a.is_enabled},"fw-bold"])},(0,l.zw)(""+(1==a.is_enabled?"啟用":"不啟用")),3),(0,o._)("td",p,[(0,o._)("button",{type:"button",class:"btn btn-outline-success btn-sm",onClick:t=>w.modifyProduct(a)},"編輯",8,h),(0,o._)("button",{type:"button",class:"btn btn-outline-danger btn-sm",onClick:t=>w.deleteProduct(a)},"刪除",8,_)])])))),128))])])])])):((0,o.wg)(),(0,o.iD)("div",i)),(0,o.Wm)(y,{pagination:v.pagination,onSendPage:w.getData},null,8,["pagination","onSendPage"])]),(0,o.Wm)(M),(0,o.Wm)(k,{ref:"manageModal",manageMode:v.manageMode,manageProduct:v.manageProduct,onConfirmManage:w.confirmManage,onCancelManage:w.cancelManage},null,8,["manageMode","manageProduct","onConfirmManage","onCancelManage"])],64)}var v=e(5577),w=e(9963);const f={class:"modal-content"},y={class:"modal-title"},M={key:0},k={key:1},P={key:2},x={class:"modal-body"},U={key:0,action:""},D={class:"container-fluid"},C={class:"row"},$={class:"col-5"},V={class:"mb-3"},z=["src"],Z={for:"imgUrl",class:"form-label fs-5 fw-bold w-100"},T=(0,o.Uk)("商品主圖網址 "),q={key:0,class:"mb-3"},H=(0,o._)("h5",null,"商品副圖網址",-1),S=["src"],Y={class:"form-label w-100",for:"url"},K=["onUpdate:modelValue","placeholder"],L={class:"col-7"},j={class:"row mb-3"},W={class:"col-9 ms-auto"},E={for:"title",class:"form-label w-100"},A=(0,o.Uk)("名稱 "),J={class:"col-3 ms-auto"},N={for:"category",class:"form-label w-100"},O=(0,o.Uk)("分類 "),B=(0,o.uE)('<option value="" disabled>商品分類</option><option value="成車">成車</option><option value="車架組">車架組</option><option value="輪組">輪組</option><option value="安全帽">安全帽</option><option value="車衣">車衣</option>',6),F=[B],G={class:"row mb-3"},I={class:"col-4 mb-3"},Q={for:"origin_price",class:"form-label w-100"},R=(0,o.Uk)("原價 "),X={class:"col-4"},aa={for:"price",class:"form-label w-100"},ta=(0,o.Uk)("價格 "),ea={class:"col-4"},oa={for:"unit",class:"form-label w-100"},la=(0,o.Uk)("商品單位 "),na=(0,o.uE)('<option value="" disabled>商品單位</option><option value="個">個</option><option value="組">組</option><option value="件">件</option><option value="頂">頂</option>',5),ia=[na],sa={class:"col-12 mb-3"},ca={for:"content",class:"form-label w-100"},ra=(0,o.Uk)("商品內容 "),da={class:"col-12"},ua={for:"description",class:"form-label w-100"},ga=(0,o.Uk)("商品描述 "),ma={class:"row"},pa={class:"col-3"},ha={for:"rating",class:"form-label w-100"},_a=(0,o.Uk)("評等 "),ba=(0,o.uE)('<option value="" disabled>選擇商品星級評等</option><option class="text-danger" value="1">☆</option><option value="2">☆☆</option><option value="3">☆☆☆</option><option value="4">☆☆☆☆</option><option value="5">☆☆☆☆☆</option>',6),va=[ba],wa={class:"col-4 mt-4"},fa={for:"enable",class:"form-label"},ya=(0,o.Uk)("是否啟用 "),Ma={key:1,class:"text-center"},ka=(0,o._)("h5",{class:"text-danger"},"再次確認刪除",-1),Pa={class:"modal-footer"},xa={key:0},Ua={key:1},Da={key:2};function Ca(a,t,e,n,i,s){return(0,o.wg)(),(0,o.iD)("div",{class:"modal fade",tabindex:"-1",id:"myModal","data-bs-backdrop":"static",onKeyup:t[15]||(t[15]=(0,w.D2)((t=>a.$emit("cancel-manage")),["esc"]))},[(0,o._)("div",{class:(0,l.C_)(["modal-dialog modal-dialog-scrollable",{"modal-xl":1===e.manageMode||2===e.manageMode}])},[(0,o._)("div",f,[(0,o._)("div",{class:(0,l.C_)(["modal-header",{"text-primary":1===e.manageMode,"text-success":2===e.manageMode,"text-danger":3===e.manageMode}])},[(0,o._)("h5",y,[1==e.manageMode?((0,o.wg)(),(0,o.iD)("span",M,"建立新產品")):2==e.manageMode?((0,o.wg)(),(0,o.iD)("span",k,"編輯產品")):3==e.manageMode?((0,o.wg)(),(0,o.iD)("span",P,"刪除產品")):(0,o.kq)("",!0)]),(0,o._)("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close",onClick:t[0]||(t[0]=(0,w.iM)((t=>a.$emit("cancel-manage")),["prevent"]))})],2),(0,o._)("div",x,[2==e.manageMode||1==e.manageMode?((0,o.wg)(),(0,o.iD)("form",U,[(0,o._)("div",D,[(0,o._)("div",C,[(0,o._)("div",$,[(0,o._)("div",V,[(0,o._)("img",{class:"img-fluid d-block mb-3",src:e.manageProduct.imageUrl,alt:""},null,8,z),(0,o._)("label",Z,[T,(0,o.wy)((0,o._)("input",{type:"text",class:"form-control",id:"imgUrl",placeholder:"輸入主圖網址","onUpdate:modelValue":t[1]||(t[1]=a=>i.localProduct.imageUrl=a)},null,512),[[w.nr,i.localProduct.imageUrl]])])]),Array.isArray(i.localProduct.imagesUrl)?((0,o.wg)(),(0,o.iD)("div",q,[H,((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(i.localProduct.imagesUrl,((a,t)=>((0,o.wg)(),(0,o.iD)(o.HY,{key:"img"+t},[(0,o._)("img",{class:"img-fluid",src:i.localProduct.imagesUrl[t],alt:""},null,8,S),(0,o._)("label",Y,[(0,o.Uk)("副圖網址"+(0,l.zw)(`${t+1}`)+" ",1),(0,o.wy)((0,o._)("input",{type:"text",id:"url",class:"form-control mb-3","onUpdate:modelValue":a=>i.localProduct.imagesUrl[t]=a,placeholder:`輸入副圖網址${t+1}`},null,8,K),[[w.nr,i.localProduct.imagesUrl[t]]])])],64)))),128)),!i.localProduct.imagesUrl.length||i.localProduct.imagesUrl[i.localProduct.imagesUrl.length-1]?((0,o.wg)(),(0,o.iD)("button",{key:0,type:"button",class:"btn btn-primary w-100 mb-3",onClick:t[2]||(t[2]=a=>i.localProduct.imagesUrl.push(""))},"新增")):(0,o.kq)("",!0),(0,o._)("button",{type:"button",class:"btn btn-outline-danger w-100",onClick:t[3]||(t[3]=a=>i.localProduct.imagesUrl.pop(""))},"刪除最後一個")])):(0,o.kq)("",!0)]),(0,o._)("div",L,[(0,o._)("div",j,[(0,o._)("div",W,[(0,o._)("label",E,[A,(0,o.wy)((0,o._)("input",{type:"text","onUpdate:modelValue":t[4]||(t[4]=a=>i.localProduct.title=a),class:"form-control",id:"title",placeholder:"輸入名稱"},null,512),[[w.nr,i.localProduct.title]])])]),(0,o._)("div",J,[(0,o._)("label",N,[O,(0,o.wy)((0,o._)("select",{id:"category","onUpdate:modelValue":t[5]||(t[5]=a=>i.localProduct.category=a),class:"form-select"},F,512),[[w.bM,i.localProduct.category]])])])]),(0,o._)("div",G,[(0,o._)("div",I,[(0,o._)("label",Q,[R,(0,o.wy)((0,o._)("input",{type:"number",class:"form-control",min:"0",id:"origin_price",placeholder:"輸入原價","onUpdate:modelValue":t[6]||(t[6]=a=>i.localProduct.origin_price=a)},null,512),[[w.nr,i.localProduct.origin_price,void 0,{number:!0}]])])]),(0,o._)("div",X,[(0,o._)("label",aa,[ta,(0,o.wy)((0,o._)("input",{type:"number",class:"form-control",min:"0",id:"price",placeholder:"輸入價格","onUpdate:modelValue":t[7]||(t[7]=a=>i.localProduct.price=a)},null,512),[[w.nr,i.localProduct.price,void 0,{number:!0}]])])]),(0,o._)("div",ea,[(0,o._)("label",oa,[la,(0,o.wy)((0,o._)("select",{id:"unit","onUpdate:modelValue":t[8]||(t[8]=a=>i.localProduct.unit=a),class:"form-select"},ia,512),[[w.bM,i.localProduct.unit]])])]),(0,o._)("div",sa,[(0,o._)("label",ca,[ra,(0,o.wy)((0,o._)("textarea",{type:"text",class:"form-control",name:"content",id:"content",cols:"30",rows:"3","onUpdate:modelValue":t[9]||(t[9]=a=>i.localProduct.content=a),placeholder:"輸入商品內容"},null,512),[[w.nr,i.localProduct.content]])])]),(0,o._)("div",da,[(0,o._)("label",ua,[ga,(0,o.wy)((0,o._)("textarea",{type:"text",class:"form-control",name:"description",id:"description",cols:"30",rows:"3","onUpdate:modelValue":t[10]||(t[10]=a=>i.localProduct.description=a),placeholder:"輸入商品描述"},null,512),[[w.nr,i.localProduct.description]])])])]),(0,o._)("div",ma,[(0,o._)("div",pa,[(0,o._)("label",ha,[_a,(0,o.wy)((0,o._)("select",{class:"form-select","onUpdate:modelValue":t[11]||(t[11]=a=>i.localProduct.rating=a),name:"rating",id:"rating"},va,512),[[w.bM,i.localProduct.rating,void 0,{number:!0}]])])]),(0,o._)("div",wa,[(0,o._)("label",fa,[ya,(0,o.wy)((0,o._)("input",{type:"checkbox",class:"form-check-input",id:"enable",value:"1","onUpdate:modelValue":t[12]||(t[12]=a=>i.localProduct.is_enabled=a),"true-value":"1","false-value":"0"},null,512),[[w.e8,i.localProduct.is_enabled]])])])])])])])])):3===e.manageMode?((0,o.wg)(),(0,o.iD)("div",Ma,[ka,(0,o._)("h5",null,(0,l.zw)(`--${i.localProduct.title}--`),1)])):(0,o.kq)("",!0)]),(0,o._)("div",Pa,[(0,o._)("button",{type:"submit",class:"btn btn-outline-danger",onClick:t[13]||(t[13]=(0,w.iM)((t=>a.$emit("cancel-manage")),["prevent"])),"data-bs-dismiss":"modal"},"取消 "),(0,o._)("button",{type:"submit",class:(0,l.C_)(["btn text-white",{"btn-primary":1==e.manageMode,"btn-success":2==e.manageMode,"btn-danger":3==e.manageMode}]),onClick:t[14]||(t[14]=(0,w.iM)((t=>a.$emit("confirm-manage",i.localProduct)),["prevent"]))},[1==e.manageMode?((0,o.wg)(),(0,o.iD)("span",xa,"新增")):2==e.manageMode?((0,o.wg)(),(0,o.iD)("span",Ua,"編輯")):3==e.manageMode?((0,o.wg)(),(0,o.iD)("span",Da,"刪除")):(0,o.kq)("",!0)],2)])])],2)],32)}var $a={data(){return{localProduct:{}}},props:["manageMode","manageProduct"],mounted(){},watch:{manageMode(){this.localProduct={...this.manageProduct}}}},Va=e(3744);const za=(0,Va.Z)($a,[["render",Ca]]);var Za=za,Ta=e(8794),qa=e(9150),Ha=e(3387),Sa={data(){return{tempProducts:{},manageProduct:{imagesUrl:[]},manageMode:0,pagination:{},manageModal:{},statusModal:{}}},components:{manageModal:Za,pagination:Ta.Z,toastMessage:qa.Z},mounted(){this.manageModal=new v.Modal(document.querySelector("#myModal")),this.getData()},methods:{getData(a=1){this.isLoading=!0,this.axios.get(`https://vue3-course-api.hexschool.io/v2/api/vue2022ron/admin/products/?page=${a}`).then((a=>{this.tempProducts=a.data.products,this.pagination=a.data.pagination,this.isLoading=!1})).catch((()=>{}))},addProduct(){this.manageModal.show(),this.manageMode=1},modifyProduct(a){this.manageModal.show(),this.manageMode=2,this.manageProduct=JSON.parse(JSON.stringify(a))},deleteProduct(a){this.manageModal.show(),this.manageMode=3,this.manageProduct={...a}},confirmManage(a){1===this.manageMode?this.axios.post("https://vue3-course-api.hexschool.io/v2/api/vue2022ron/admin/product",{data:a}).then((a=>{this.getData(),this.manageProduct={},this.manageMode=0,this.manageModal.hide(),this.$httpToastMessage(a,"新增商品")})).catch((a=>{this.manageMode=0,this.manageModal.hide(),this.$httpToastMessage(a.response,"新增商品")})):2===this.manageMode?this.axios.put(`https://vue3-course-api.hexschool.io/v2/api/vue2022ron/admin/product/${a.id}`,{data:a}).then((a=>{this.getData(this.pagination.current_page),this.manageProduct={},this.manageMode=0,this.manageModal.hide(),setTimeout((()=>{this.$httpToastMessage(a,"修改商品")}),1e3)})).catch((a=>{this.manageMode=0,this.manageModal.hide(),this.$httpToastMessage(a.response,"修改商品")})):3===this.manageMode&&this.axios.delete(`https://vue3-course-api.hexschool.io/v2/api/vue2022ron/admin/product/${a.id}`).then((a=>{this.manageProduct={},this.manageMode=0,this.manageModal.hide(),this.getData(this.pagination.current_page),this.$httpToastMessage(a,"刪除商品")})).catch((a=>{this.manageMode=0,this.manageModal.hide(),this.$httpToastMessage(a.response,"刪除商品")}))},cancelManage(){this.manageProduct={imagesUrl:[]},this.manageMode=0}},mixins:[Ha.Z]};const Ya=(0,Va.Z)(Sa,[["render",b]]);var Ka=Ya},8794:function(a,t,e){e.d(t,{Z:function(){return v}});var o=e(6252),l=e(3577),n=e(9963);const i={class:"pagination"},s={class:"pagination__container container-auto text-center"},c={class:"pagination__list d-flex justify-content-center"},r=(0,o._)("span",{class:"material-symbols-outlined d-block"},"keyboard_double_arrow_left",-1),d=[r],u=["onClick"],g=(0,o._)("span",{class:"material-symbols-outlined d-block"},"keyboard_double_arrow_right",-1),m=[g];function p(a,t,e,r,g,p){return(0,o.wg)(),(0,o.iD)("section",i,[(0,o._)("div",s,[(0,o._)("ul",c,[(0,o._)("li",{class:(0,l.C_)(["pagination__list__item d-flex",{disabled:!e.pagination.has_pre}])},[(0,o._)("a",{href:"#",class:"pagination__previous",onClick:t[0]||(t[0]=(0,n.iM)((t=>a.$emit("send-page",e.pagination.current_page-1)),["prevent"]))},d)],2),((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(e.pagination.total_pages,((t,i)=>((0,o.wg)(),(0,o.iD)("li",{key:"page"+i,class:"pagination__list__item"},[(0,o._)("a",{class:(0,l.C_)(["pagination__link",{active:t===e.pagination.current_page}]),href:"#",onClick:(0,n.iM)((e=>a.$emit("send-page",t)),["prevent"])},(0,l.zw)(t),11,u)])))),128)),(0,o._)("li",{class:(0,l.C_)(["pagination__list__item d-flex",{disabled:!e.pagination.has_next}])},[(0,o._)("a",{href:"#",class:"pagination__next",onClick:t[1]||(t[1]=(0,n.iM)((t=>a.$emit("send-page",e.pagination.current_page+1)),["prevent"]))},m)],2)])])])}var h={props:["pagination"],data(){return{}}},_=e(3744);const b=(0,_.Z)(h,[["render",p]]);var v=b},9150:function(a,t,e){e.d(t,{Z:function(){return p}});var o=e(6252),l=e(3577);const n={class:"toast-container position-fixed top-0 end-0 pt-3 pe-3",style:{"z-index":"9999"}},i={class:"text-white me-auto"},s=(0,o._)("button",{type:"button",class:"btn-close btn-close-white","data-bs-dismiss":"toast","aria-label":"Close"},null,-1),c={key:0,class:"toast-body"};function r(a,t,e,r,d,u){return(0,o.wg)(),(0,o.iD)("div",n,[((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(d.msg,((a,t)=>((0,o.wg)(),(0,o.iD)("div",{key:"item"+t,class:(0,l.C_)(["toast show",`toast${t}`]),role:"alert","aria-live":"assertive","aria-atomic":"true"},[(0,o._)("div",{class:(0,l.C_)(["toast-header",`bg-${a.style}`]),style:{opacity:"0.87"}},[(0,o._)("strong",i,(0,l.zw)(a.title),1),s],2),a.content?((0,o.wg)(),(0,o.iD)("div",c,(0,l.zw)(a.content),1)):(0,o.kq)("",!0)],2)))),128))])}var d=e(9868),u={data(){return{msg:[]}},mounted(){d.Z.on("toastMessage",(a=>{this.msg.push(a),this.toastShow()}))},methods:{toastShow(){setTimeout((()=>{this.msg.shift()}),6e3)}}},g=e(3744);const m=(0,g.Z)(u,[["render",r]]);var p=m}}]);
//# sourceMappingURL=255.a9639391.js.map