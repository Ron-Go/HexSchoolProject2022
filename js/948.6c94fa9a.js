"use strict";(self["webpackChunkproject2022"]=self["webpackChunkproject2022"]||[]).push([[948],{3387:function(t,o,a){var e=a(7398),i=a.n(e);o["Z"]={data(){return{isLoading:!1,loader:"dots",fullPage:!1,color:"#D96500",backgroundColor:"#eaeaea",opacity:1}},components:{Loading:i()}}},654:function(t,o){o["Z"]={methods:{currency(t){const o=parseInt(t,10);return`${o.toFixed(0).replace(/./g,((t,o,a)=>o&&"."!==t&&(a.length-o)%3===0?`, ${t}`.replace(/\s/g,""):t))}`}}}},1290:function(t,o){o["Z"]={mounted(){this.dialogModal=document.getElementById("infoModal")},methods:{showDialog(t){this.dialogModal.showModal(),this.dialogMode=t,this.dialogModal.classList.add("animate__animated","animate__zoomIn"),setTimeout((()=>{this.dialogModal.classList.remove("animate__zoomIn"),this.dialogModal.classList.add("animate__zoomOut")}),2e3),setTimeout((()=>{this.dialogModal.close(),this.dialogModal.classList.remove("animate__zoomOut"),this.dialogMode=0}),2500)}}}},8794:function(t,o,a){a.d(o,{Z:function(){return y}});var e=a(6252),i=a(3577),s=a(9963);const r={class:"pagination"},n={class:"pagination__container container-auto text-center"},c={class:"pagination__list d-flex justify-content-center"},l=(0,e._)("span",{class:"material-symbols-outlined d-block"},"keyboard_double_arrow_left",-1),d=[l],_=["onClick"],u=(0,e._)("span",{class:"material-symbols-outlined d-block"},"keyboard_double_arrow_right",-1),g=[u];function p(t,o,a,l,u,p){return(0,e.wg)(),(0,e.iD)("section",r,[(0,e._)("div",n,[(0,e._)("ul",c,[(0,e._)("li",{class:(0,i.C_)(["pagination__list__item d-flex",{disabled:!a.pagination.has_pre}])},[(0,e._)("a",{href:"#",class:"pagination__previous",onClick:o[0]||(o[0]=(0,s.iM)((o=>t.$emit("send-page",a.pagination.current_page-1)),["prevent"]))},d)],2),((0,e.wg)(!0),(0,e.iD)(e.HY,null,(0,e.Ko)(a.pagination.total_pages,((o,r)=>((0,e.wg)(),(0,e.iD)("li",{key:"page"+r,class:"pagination__list__item"},[(0,e._)("a",{class:(0,i.C_)(["pagination__link",{active:o===a.pagination.current_page}]),href:"#",onClick:(0,s.iM)((a=>t.$emit("send-page",o)),["prevent"])},(0,i.zw)(o),11,_)])))),128)),(0,e._)("li",{class:(0,i.C_)(["pagination__list__item d-flex",{disabled:!a.pagination.has_next}])},[(0,e._)("a",{href:"#",class:"pagination__next",onClick:o[1]||(o[1]=(0,s.iM)((o=>t.$emit("send-page",a.pagination.current_page+1)),["prevent"]))},g)],2)])])])}var h={props:["pagination"],data(){return{}}},m=a(3744);const v=(0,m.Z)(h,[["render",p]]);var y=v},6240:function(t,o,a){a.d(o,{Z:function(){return b}});var e=a(6252);const i={class:"dialog border-0 p-5",id:"infoModal",ref:"infoDom"},s={key:0,class:"dialog__addCart text-center"},r=(0,e._)("span",{class:"material-symbols-outlined dialog__addCart__logo"},"add_shopping_cart",-1),n=(0,e._)("p",{class:"dialog__addCart__caption fs-4"},"已加入購物車",-1),c=[r,n],l={key:1,class:"dialog__favorite text-center"},d=(0,e._)("span",{class:"material-symbols-outlined dialog__favorite__logo"},"favorite",-1),_=(0,e._)("p",{class:"dialog__favorite__caption fs-4"},"已加入追蹤",-1),u=[d,_],g={key:2,class:"dialog__unfavorite text-center"},p=(0,e._)("span",{class:"material-symbols-outlined dialog__unfavorite__logo"},"heart_broken",-1),h=(0,e._)("p",{class:"dialog__unfavorite__caption fs-4"},"已取消追蹤",-1),m=[p,h];function v(t,o,a,r,n,d){return(0,e.wg)(),(0,e.iD)("dialog",i,[1===a.dialogMode?((0,e.wg)(),(0,e.iD)("div",s,c)):2===a.dialogMode?((0,e.wg)(),(0,e.iD)("div",l,u)):3===a.dialogMode?((0,e.wg)(),(0,e.iD)("div",g,m)):(0,e.kq)("",!0)],512)}var y={data(){return{}},props:["dialogMode","isTracking"],mounted(){},methods:{}},f=a(3744);const k=(0,f.Z)(y,[["render",v]]);var b=k},2948:function(t,o,a){a.r(o),a.d(o,{default:function(){return B}});var e=a(6252),i=a(9963),s=a(3577);const r={class:"products"},n={key:0,class:"position-relative",style:{height:"100vh"}},c={key:1,class:"products__category sticky-top"},l={class:"products__category__container container-auto"},d={class:"products__category__list d-flex mx-auto"},_={class:"products__category__item"},u=["onClick"],g={class:"products__container container-auto"},p=["onClick"],h=["onClick"],m={class:"product__body"},v={class:"product__body__top"},y={class:"product__data"},f=(0,e._)("p",{class:"product__series mb-1"},"2019 Bicycle",-1),k={class:"product__title"},b={class:"product__body__center d-flex"},C={class:"product__rating"},w={class:"product__price"},M={class:"product__body__bottom justify-content-between"},x={class:"product__num"},L=["onClick","disabled"],D=(0,e._)("span",{class:"material-symbols-outlined"},"remove",-1),$=[D],Z={class:"product__num__value d-flex"},q={class:"fs-6 my-auto"},P=["onClick"],z=(0,e._)("span",{class:"material-symbols-outlined"},"add",-1),N=[z],S=["onClick"],T=(0,e.Uk)(" 加入購物車 "),F=(0,e._)("span",{class:"material-symbols-outlined"},"add_shopping_cart",-1),A=[T,F];function R(t,o,a,D,z,T){const F=(0,e.up)("Loading"),R=(0,e.up)("pagination"),I=(0,e.up)("dialog-modal");return(0,e.wg)(),(0,e.iD)(e.HY,null,[(0,e._)("section",r,[z.products.length?((0,e.wg)(),(0,e.iD)("div",c,[(0,e._)("div",l,[(0,e._)("ul",d,[(0,e._)("li",_,[(0,e._)("a",{class:"item__link",href:"#",onClick:[o[0]||(o[0]=(...t)=>T.categoryActive&&T.categoryActive(...t)),o[1]||(o[1]=(0,i.iM)((t=>T.getProducts()),["prevent"]))]},"ALL")]),((0,e.wg)(!0),(0,e.iD)(e.HY,null,(0,e.Ko)(z.productsCategory,((t,a)=>((0,e.wg)(),(0,e.iD)("li",{key:"item"+a,class:"products__category__item"},[(0,e._)("a",{class:"item__link",href:"#",onClick:[o[2]||(o[2]=(...t)=>T.categoryActive&&T.categoryActive(...t)),(0,i.iM)((o=>T.getProducts(t)),["prevent"])]},(0,s.zw)(t),9,u)])))),128))])])])):((0,e.wg)(),(0,e.iD)("div",n,[(0,e.Wm)(F,{active:t.isLoading,loader:t.loader,"is-full-page":t.fullPage,color:t.color,"background-color":t.backgroundColor,opacity:t.opacity},null,8,["active","loader","is-full-page","color","background-color","opacity"])])),(0,e._)("ul",g,[((0,e.wg)(!0),(0,e.iD)(e.HY,null,(0,e.Ko)(z.products,((o,a)=>((0,e.wg)(),(0,e.iD)("li",{key:"item"+a,class:"product__item position-relative"},[(0,e._)("a",{class:"product__item__click position-absolute",href:"#",onClick:(0,i.iM)((t=>T.getProduct(o.id)),["prevent"])},null,8,p),(0,e._)("a",{class:"product__favorite",href:"#",onClick:(0,i.iM)((t=>T.addFavorite(o.id)),["prevent"])},[(0,e._)("span",{class:(0,s.C_)(["material-symbols-outlined d-block fs-4",{favorite:!z.getFavorite.includes(o.id),"favorite--fill":z.getFavorite.includes(o.id)}])},"favorite",2)],8,h),(0,e._)("div",{class:"product__img",style:(0,s.j5)({backgroundImage:`url(${o.imageUrl})`})},null,4),(0,e._)("div",m,[(0,e._)("div",v,[(0,e._)("div",y,[f,(0,e._)("h3",k,(0,s.zw)(o.title),1)])]),(0,e._)("div",b,[(0,e._)("div",C,[((0,e.wg)(),(0,e.iD)(e.HY,null,(0,e.Ko)(5,((t,a)=>(0,e._)("span",{key:"star"+a,class:(0,s.C_)(["material-symbols-outlined fs-6",{star:o.rating>=t,"star--fill":t>o.rating}])},"star",2))),64))]),(0,e._)("p",w,(0,s.zw)(`NT $ ${t.currency(o.price)}`),1)]),(0,e._)("div",M,[(0,e._)("div",x,[(0,e._)("button",{type:"button",class:"product__num__reduce",onClick:t=>o.qty-=1,disabled:1===o.qty},$,8,L),(0,e._)("p",Z,[(0,e._)("span",q,(0,s.zw)(o.qty),1)]),(0,e._)("button",{type:"button",class:"product__num__add",onClick:t=>o.qty+=1},N,8,P)]),(0,e._)("button",{type:"button",class:"product__addCart d-flex btn btn-primary border-0 text-white-100",onClick:(0,i.iM)((t=>T.addToCart(o.id,o.qty)),["prevent"])},A,8,S)])])])))),128))])]),(0,e.Wm)(R,{pagination:z.pagination,onSendPage:T.selectPagination},null,8,["pagination","onSendPage"]),(0,e.Wm)(I,{dialogMode:z.dialogMode},null,8,["dialogMode"])],64)}var I=a(3387),j=a(9868),H=a(6240),Y=a(8794),E=a(1290),K=a(654),O={data(){return{products:[],productsCategory:[],cartLink:"",dialogMode:0,getFavorite:[],pagination:{},categoryRender:!1}},components:{dialogModal:H.Z,pagination:Y.Z},mounted(){this.getCategory(),this.getProducts(this.$route.params.category),j.Z.emit("products-routeName",this.$route.name),j.Z.on("refresh-favorite",(()=>{this.getLocalStorage()})),this.getLocalStorage()},watch:{$route:{handler(){console.log(this.$route)},deep:!1},categoryRender(){!0===this.categoryRender&&this.activeCategory(this.$route.params.category||"ALL")}},methods:{getProducts(t=""){this.isLoading=!0;const o=this.$route.query.category?this.$route.query.category:t;this.axios.get(`https://vue3-course-api.hexschool.io/v2/api/vue2022ron/products/?category=${o}`).then((t=>{this.products=t.data.products,this.addQtyNum(),this.pagination=t.data.pagination,this.isLoading=!1})).catch((t=>{console.dir(t)}))},selectPagination(t=1){this.products=[],this.$router.push("products"),this.isLoading=!0,this.axios.get(`https://vue3-course-api.hexschool.io/v2/api/vue2022ron/products/?page=${t}`).then((t=>{this.products=t.data.products,this.pagination=t.data.pagination,this.addQtyNum(),this.isLoading=!1})).catch((()=>{}))},getCategory(){this.axios.get("https://vue3-course-api.hexschool.io/v2/api/vue2022ron/products").then((t=>{const o=t.data.products,a=[];o.forEach(((t,o)=>{a.push(t.category),a.indexOf(t.category)===o&&this.productsCategory.push(t.category)})),setTimeout((()=>{this.categoryRender=!0}),50)})).catch((t=>{console.dir(t)}))},categoryActive(t){const{parentNode:o}=t.target,{children:a}=o.parentNode;for(let e=0;e<=a.length-1;e+=1)a[e].childNodes[0].classList.remove("item__link--active");t.target.classList.add("item__link--active")},addQtyNum(){this.products.forEach(((t,o)=>{this.products[o].qty=1}))},addFavorite(t){j.Z.emit("add-to-favorite",t),this.getLocalStorage(),this.getFavorite.includes(t)?this.showDialog(3):this.showDialog(2)},getLocalStorage(){setTimeout((()=>{this.getFavorite=JSON.parse(localStorage.getItem("favorite"))||[]}))},addToCart(t,o){const a={product_id:t,qty:o};this.axios.post("https://vue3-course-api.hexschool.io/v2/api/vue2022ron/cart",{data:a}).then((o=>{console.dir(o),j.Z.emit("getCart",a),this.showDialog(1),this.products.forEach(((o,a)=>{o.id===t&&(this.products[a].qty=1)}))})).catch((t=>{console.dir(t)}))},getProduct(t){this.$router.push(`product/${t}`)},activeCategory(t){if(console.log(t),!0===this.categoryRender){const o=document.querySelector(".products__category__list").children;console.log(o);for(let a=0;a<=o.length-1;a+=1)o[a].children[0].classList.remove("item__link--active"),o[a].children[0].innerText===t&&o[a].children[0].classList.add("item__link--active");this.categoryRender=!1}else this.categoryRender=!1}},mixins:[K.Z,E.Z,I.Z],unmounted(){j.Z.off("refresh-favorite")}},Q=a(3744);const W=(0,Q.Z)(O,[["render",R]]);var B=W}}]);
//# sourceMappingURL=948.6c94fa9a.js.map