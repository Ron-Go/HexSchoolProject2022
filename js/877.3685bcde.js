"use strict";(self["webpackChunkproject2022"]=self["webpackChunkproject2022"]||[]).push([[877],{3387:function(t,e,a){var s=a(7398),l=a.n(s);e["Z"]={data(){return{isLoading:!1,loader:"dots",fullPage:!1,color:"#D96500",backgroundColor:"#eaeaea",opacity:1}},components:{Loading:l()}}},8794:function(t,e,a){a.d(e,{Z:function(){return b}});var s=a(6252),l=a(3577),i=a(9963);const r={class:"pagination"},n={class:"pagination__container container-auto text-center"},d={class:"pagination__list d-flex justify-content-center"},o=(0,s._)("span",{class:"material-symbols-outlined d-block"},"keyboard_double_arrow_left",-1),c=[o],u=["onClick"],p=(0,s._)("span",{class:"material-symbols-outlined d-block"},"keyboard_double_arrow_right",-1),_=[p];function h(t,e,a,o,p,h){return(0,s.wg)(),(0,s.iD)("section",r,[(0,s._)("div",n,[(0,s._)("ul",d,[(0,s._)("li",{class:(0,l.C_)(["pagination__list__item d-flex",{disabled:!a.pagination.has_pre}])},[(0,s._)("a",{href:"#",class:"pagination__previous",onClick:e[0]||(e[0]=(0,i.iM)((e=>t.$emit("send-page",a.pagination.current_page-1)),["prevent"]))},c)],2),((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(a.pagination.total_pages,((e,r)=>((0,s.wg)(),(0,s.iD)("li",{key:"page"+r,class:"pagination__list__item"},[(0,s._)("a",{class:(0,l.C_)(["pagination__link",{active:e===a.pagination.current_page}]),href:"#",onClick:(0,i.iM)((a=>t.$emit("send-page",e)),["prevent"])},(0,l.zw)(e),11,u)])))),128)),(0,s._)("li",{class:(0,l.C_)(["pagination__list__item d-flex",{disabled:!a.pagination.has_next}])},[(0,s._)("a",{href:"#",class:"pagination__next",onClick:e[1]||(e[1]=(0,i.iM)((e=>t.$emit("send-page",a.pagination.current_page+1)),["prevent"]))},_)],2)])])])}var m={props:["pagination"],data(){return{}}},g=a(3744);const w=(0,g.Z)(m,[["render",h]]);var b=w},9150:function(t,e,a){a.d(e,{Z:function(){return h}});var s=a(6252),l=a(3577);const i={class:"toast-container position-fixed top-0 end-0 pt-3 pe-3",style:{"z-index":"9999"}},r={class:"text-white me-auto"},n=(0,s._)("button",{type:"button",class:"btn-close btn-close-white","data-bs-dismiss":"toast","aria-label":"Close"},null,-1),d={key:0,class:"toast-body"};function o(t,e,a,o,c,u){return(0,s.wg)(),(0,s.iD)("div",i,[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(c.msg,((t,e)=>((0,s.wg)(),(0,s.iD)("div",{key:"item"+e,class:(0,l.C_)(["toast show",`toast${e}`]),role:"alert","aria-live":"assertive","aria-atomic":"true"},[(0,s._)("div",{class:(0,l.C_)(["toast-header",`bg-${t.style}`]),style:{opacity:"0.87"}},[(0,s._)("strong",r,(0,l.zw)(t.title),1),n],2),t.content?((0,s.wg)(),(0,s.iD)("div",d,(0,l.zw)(t.content),1)):(0,s.kq)("",!0)],2)))),128))])}var c=a(9868),u={data(){return{msg:[]}},mounted(){c.Z.on("toastMessage",(t=>{this.msg.push(t),this.toastShow()}))},methods:{toastShow(){setTimeout((()=>{this.msg.shift()}),6e3)}}},p=a(3744);const _=(0,p.Z)(u,[["render",o]]);var h=_},7877:function(t,e,a){a.r(e),a.d(e,{default:function(){return Gt}});var s=a(6252),l=a(3577);const i={class:"container position-relative",style:{height:"100vh"}},r={key:0,style:{height:"80vh"}},n={key:1,class:"row"},d={class:"col-12"},o={class:"table table-hover mt-5"},c=(0,s._)("thead",null,[(0,s._)("tr",null,[(0,s._)("th",null,"下單時間"),(0,s._)("th",null,"Email"),(0,s._)("th",null,"購買內容"),(0,s._)("th",null,"應付金額"),(0,s._)("th",null,"付款狀態"),(0,s._)("th",null,"訂單管理")])],-1),u={class:"btn-group"},p=["onClick"],_=["onClick"];function h(t,e,a,h,m,g){const w=(0,s.up)("Loading"),b=(0,s.up)("pagination"),v=(0,s.up)("orderModal"),y=(0,s.up)("toastMessage");return(0,s.wg)(),(0,s.iD)(s.HY,null,[(0,s._)("div",i,[(0,s.Wm)(w,{active:t.isLoading,loader:t.loader,"is-full-page":t.fullPage,color:t.color},null,8,["active","loader","is-full-page","color"]),m.tempOrders.length?((0,s.wg)(),(0,s.iD)("div",n,[(0,s._)("div",d,[(0,s._)("table",o,[c,(0,s._)("tbody",null,[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(m.tempOrders,((t,e)=>((0,s.wg)(),(0,s.iD)("tr",{key:"item"+e},[(0,s._)("td",null,(0,l.zw)(g.convertUnix(t.create_at)),1),(0,s._)("td",null,(0,l.zw)(t.user.email),1),(0,s._)("td",null,[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(t.products,((t,e)=>((0,s.wg)(),(0,s.iD)("ul",{class:"list-unstyled",key:"list"+e},[(0,s._)("li",null,(0,l.zw)(t.product.title)+" / 數量："+(0,l.zw)(t.qty)+(0,l.zw)(t.product.unit),1)])))),128))]),(0,s._)("td",null,(0,l.zw)(t.total),1),(0,s._)("td",null,[(0,s._)("span",{class:(0,l.C_)({"text-success":t.is_paid,"text-danger":!t.is_paid,"fw-bold":!t.is_paid})},(0,l.zw)(""+(t.is_paid?"已付款":"未付款")),3)]),(0,s._)("td",null,[(0,s._)("div",u,[(0,s._)("button",{type:"button",class:"btn btn-outline-success btn-sm",onClick:e=>g.checkOrder(t)},"檢視",8,p),(0,s._)("button",{type:"button",class:"btn btn-outline-danger btn-sm",onClick:e=>g.deleteOrder(t)},"刪除",8,_)])])])))),128))])])])])):((0,s.wg)(),(0,s.iD)("div",r)),(0,s.Wm)(b,{pagination:m.pagination,onSendPage:g.getData},null,8,["pagination","onSendPage"])]),(0,s.Wm)(v,{order:m.order,is_delete:m.is_delete,onGetData:g.getData,onUpdataPaid:g.updataPaid,onDeleteOrder:g.deleteConfirm},null,8,["order","is_delete","onGetData","onUpdataPaid","onDeleteOrder"]),(0,s.Wm)(y)],64)}var m=a(5577),g=a(9150),w=a(3387),b=a(9963);const v={class:"modal fade",id:"orderModal",tabindex:"-1","aria-labelledby":"exampleModalLabel","aria-hidden":"true"},y={class:"modal-dialog modal-lg"},k={class:"modal-content"},f={class:"modal-header"},x={key:0},O={key:1},D=(0,s._)("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"},null,-1),$={key:0},z={class:"modal-body"},C={key:0,class:"container"},M={class:"row"},Z={class:"col-6"},U=(0,s._)("h5",null,"用戶資料",-1),P={class:"table"},H=(0,s._)("th",{style:{width:"100px"}},"姓名",-1),L=(0,s._)("th",null,"E-mail",-1),Y=(0,s._)("th",null,"電話",-1),q=(0,s._)("th",null,"地址",-1),K={class:"col-6"},S=(0,s._)("h5",null,"訂單細節",-1),T={class:"table"},j=(0,s._)("th",{style:{width:"100px"}},"訂單編號",-1),W=(0,s._)("th",null,"下單時間",-1),E=(0,s._)("th",null,"付款狀態",-1),G=(0,s._)("th",null,"付款時間",-1),F={class:"fw-bold"},V={key:0,class:"text-success"},A={key:1,class:"text-danger"},B=(0,s._)("th",null,"總金額",-1),I={class:"text-success fw-bold"},J=(0,s._)("h5",null,"選購商品",-1),N={class:"card-body"},Q={class:"card-title"},R={class:"card-text"},X=(0,s.Uk)(" 單價："),tt={class:"pe-3"},et=(0,s.Uk)(" 數量："),at={class:"pe-3"},st=(0,s.Uk)(" 總價："),lt={class:"text-danger fw-bold"},it={class:"d-flex justify-content-end"},rt=(0,s._)("p",{class:"pe-3"},"變更付款狀態",-1),nt={class:"form-check form-switch"},dt=["for"],ot=["id"],ct={class:"modal-footer"},ut={key:1},pt={class:"modal-body"},_t=(0,s._)("h4",{class:"text-danger text-center"},"確認刪除此訂單",-1),ht={class:"table"},mt=(0,s._)("th",{style:{width:"100px"}},"姓名",-1),gt=(0,s._)("th",null,"E-mail",-1),wt=(0,s._)("th",null,"電話",-1),bt=(0,s._)("th",null,"地址",-1),vt=(0,s._)("th",{style:{width:"100px"}},"訂單編號",-1),yt=(0,s._)("th",null,"下單時間",-1),kt=(0,s._)("th",null,"付款狀態",-1),ft=(0,s._)("th",null,"總金額",-1),xt={class:"text-success fw-bold"},Ot=(0,s._)("h5",null,"選購商品",-1),Dt={class:"card-body"},$t={class:"card-title"},zt={class:"card-text"},Ct=(0,s.Uk)(" 單價："),Mt={class:"pe-3"},Zt=(0,s.Uk)(" 數量："),Ut={class:"pe-3"},Pt=(0,s.Uk)(" 總價："),Ht={class:"text-danger fw-bold"},Lt={class:"modal-footer"};function Yt(t,e,a,i,r,n){return(0,s.wg)(),(0,s.iD)("div",v,[(0,s._)("div",y,[(0,s._)("div",k,[(0,s._)("div",f,[(0,s._)("h5",{class:(0,l.C_)(["modal-title",{"text-success":!a.is_delete,"text-danger":a.is_delete}]),id:"exampleModalLabel"},[a.is_delete?((0,s.wg)(),(0,s.iD)("span",O,"刪除訂單")):((0,s.wg)(),(0,s.iD)("span",x,"訂單細節"))],2),D]),a.is_delete?((0,s.wg)(),(0,s.iD)("div",ut,[(0,s._)("div",pt,[_t,(0,s._)("table",ht,[(0,s._)("tbody",null,[(0,s._)("tr",null,[mt,(0,s._)("td",null,(0,l.zw)(r.tempOrder.user.name),1)]),(0,s._)("tr",null,[gt,(0,s._)("td",null,(0,l.zw)(r.tempOrder.user.email),1)]),(0,s._)("tr",null,[wt,(0,s._)("td",null,(0,l.zw)(r.tempOrder.user.tel),1)]),(0,s._)("tr",null,[bt,(0,s._)("td",null,(0,l.zw)(r.tempOrder.user.address),1)]),(0,s._)("tr",null,[vt,(0,s._)("td",null,(0,l.zw)(r.tempOrder.id),1)]),(0,s._)("tr",null,[yt,(0,s._)("td",null,(0,l.zw)(r.tempOrder.create_at),1)]),(0,s._)("tr",null,[kt,(0,s._)("td",{class:(0,l.C_)(["fw-bold",{"text-success":r.tempOrder.is_paid,"text-danger":!r.tempOrder.is_paid}])},(0,l.zw)(""+(r.tempOrder.is_paid?"已付款":"尚未付款")),3)]),(0,s._)("tr",null,[ft,(0,s._)("td",xt,"$"+(0,l.zw)(r.tempOrder.total),1)])])]),Ot,((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(r.tempOrder.products,((t,e)=>((0,s.wg)(),(0,s.iD)("div",{key:"product"+e,class:"card w-75 mb-3"},[(0,s._)("div",Dt,[(0,s._)("h5",$t,(0,l.zw)(t.product.title),1),(0,s._)("p",zt,[Ct,(0,s._)("span",Mt,"$"+(0,l.zw)(`${t.product.price}`),1),Zt,(0,s._)("span",Ut,(0,l.zw)(`${t.qty}${t.product.unit}`),1),Pt,(0,s._)("span",Ht,"$"+(0,l.zw)(`${t.total}`),1)])])])))),128))]),(0,s._)("div",Lt,[(0,s._)("button",{type:"button",class:"btn btn-secondary","data-bs-dismiss":"modal",onClick:e[3]||(e[3]=e=>t.$emit("getData"))},"取消"),(0,s._)("button",{type:"button",class:"btn btn-primary",onClick:e[4]||(e[4]=e=>t.$emit("deleteOrder",r.tempOrder))},"刪除")])])):((0,s.wg)(),(0,s.iD)("div",$,[(0,s._)("div",z,[r.tempOrder.user?((0,s.wg)(),(0,s.iD)("div",C,[(0,s._)("div",M,[(0,s._)("div",Z,[U,(0,s._)("table",P,[(0,s._)("tbody",null,[(0,s._)("tr",null,[H,(0,s._)("td",null,(0,l.zw)(r.tempOrder.user.name),1)]),(0,s._)("tr",null,[L,(0,s._)("td",null,(0,l.zw)(r.tempOrder.user.email),1)]),(0,s._)("tr",null,[Y,(0,s._)("td",null,(0,l.zw)(r.tempOrder.user.tel),1)]),(0,s._)("tr",null,[q,(0,s._)("td",null,(0,l.zw)(r.tempOrder.user.address),1)])])])]),(0,s._)("div",K,[S,(0,s._)("table",T,[(0,s._)("tbody",null,[(0,s._)("tr",null,[j,(0,s._)("td",null,(0,l.zw)(r.tempOrder.id),1)]),(0,s._)("tr",null,[W,(0,s._)("td",null,(0,l.zw)(r.tempOrder.create_at),1)]),(0,s._)("tr",null,[E,(0,s._)("td",{class:(0,l.C_)(["fw-bold",{"text-success":r.tempOrder.is_paid,"text-danger":!r.tempOrder.is_paid}])},(0,l.zw)(""+(r.tempOrder.is_paid?"已付款":"尚未付款")),3)]),(0,s._)("tr",null,[G,(0,s._)("td",F,[r.tempOrder.paid_date?((0,s.wg)(),(0,s.iD)("span",V,(0,l.zw)(r.tempOrder.paid_date),1)):((0,s.wg)(),(0,s.iD)("span",A,"時間不明"))])]),(0,s._)("tr",null,[B,(0,s._)("td",I,"$"+(0,l.zw)(r.tempOrder.total),1)])])]),J,((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(r.tempOrder.products,((t,e)=>((0,s.wg)(),(0,s.iD)("div",{key:"product"+e,class:"card w-75 mb-3"},[(0,s._)("div",N,[(0,s._)("h5",Q,(0,l.zw)(t.product.title),1),(0,s._)("p",R,[X,(0,s._)("span",tt,"$"+(0,l.zw)(`${t.product.price}`),1),et,(0,s._)("span",at,(0,l.zw)(`${t.qty}${t.product.unit}`),1),st,(0,s._)("span",lt,"$"+(0,l.zw)(`${t.total}`),1)])])])))),128)),(0,s._)("div",it,[rt,(0,s._)("div",nt,[(0,s._)("label",{class:"form-check-label",for:r.tempOrder.id},[(0,s.wy)((0,s._)("input",{class:"form-check-input",type:"checkbox",id:r.tempOrder.id,"onUpdate:modelValue":e[0]||(e[0]=t=>r.tempOrder.is_paid=t)},null,8,ot),[[b.e8,r.tempOrder.is_paid]]),(0,s._)("span",{class:(0,l.C_)(["fw-bold",{"text-success":r.tempOrder.is_paid}])},(0,l.zw)(""+(r.tempOrder.is_paid?"已付款":"未付款")),3)],8,dt)])])])])])):(0,s.kq)("",!0)]),(0,s._)("div",ct,[(0,s._)("button",{type:"button",class:"btn btn-secondary","data-bs-dismiss":"modal",onClick:e[1]||(e[1]=e=>t.$emit("getData"))},"取消"),(0,s._)("button",{type:"button",class:"btn btn-primary",onClick:e[2]||(e[2]=e=>t.$emit("updataPaid",r.tempOrder))},"變更付款狀態")])]))])])])}var qt={props:["order","is_delete"],data(){return{tempOrder:{}}},mounted(){},watch:{order(){this.tempOrder={...this.order}}}},Kt=a(3744);const St=(0,Kt.Z)(qt,[["render",Yt]]);var Tt=St,jt=a(8794),Wt={components:{toastMessage:g.Z,orderModal:Tt,pagination:jt.Z},data(){return{is_delete:!1,tempOrders:{},order:{},pagination:{},orderModal:{},statusModal:{}}},mounted(){this.orderModal=new m.Modal(document.querySelector("#orderModal")),this.getData()},computed:{convertUnix(){return t=>{const e=new Date(1e3*t);return`${e.getFullYear()}/${this.repairZoro(e.getMonth()+1)}/${this.repairZoro(e.getDate())} ${this.repairZoro(e.getHours())}:${this.repairZoro(e.getMinutes())}:${this.repairZoro(e.getSeconds())}`}}},methods:{getData(t=1){this.isLoading=!0,this.axios.get(`https://vue3-course-api.hexschool.io/v2/api/vue2022ron/admin/orders/?page=${t}`).then((t=>{this.tempOrders=t.data.orders,this.pagination=t.data.pagination,this.isLoading=!1})).catch((t=>{this.$httpToastMessage(t.response,"取得訂單")}))},repairZoro(t){return t<10?`0${t}`:t},updataPaid(t){const e={is_paid:t.is_paid};this.axios.put(`https://vue3-course-api.hexschool.io/v2/api/vue2022ron/admin/order/${t.id}`,{data:e}).then((t=>{console.dir(t),this.getData(),this.orderModal.hide(),this.$httpToastMessage(t,"更新訂單")})).catch((t=>{this.orderModal.hide(),this.$httpToastMessage(t.response,"更新訂單")}))},deleteConfirm(t){this.axios.delete(`https://vue3-course-api.hexschool.io/v2/api/vue2022ron/admin/orders/${t.id}`).then((t=>{this.getData(),this.orderModal.hide(),this.$httpToastMessage(t,"刪除訂單")})).catch((t=>{this.orderModal.hide(),this.$httpToastMessage(t.response,"刪除訂單")}))},checkOrder(t){this.is_delete=!1,this.order=t,this.orderModal.show()},deleteOrder(t){this.is_delete=!0,this.order=t,this.orderModal.show()}},mixins:[w.Z]};const Et=(0,Kt.Z)(Wt,[["render",h]]);var Gt=Et}}]);
//# sourceMappingURL=877.3685bcde.js.map